<div class="sla-panel" style="display: flex; flex-direction: column; height: 100%; border: 1px solid #444; background: rgba(0,0,0,0.2);">
    
    <div class="sla-header-bar" style="background: #3a003a; border-color: #8a2be2;">EBB DISCIPLINES</div>
    
    <div class="scroll-list" style="flex: 1; overflow-y: auto; padding: 0;">
        <table class="sla-table" style="width: 100%; margin: 0; border-collapse: collapse;">
            <thead>
                <tr style="position: sticky; top: 0; background: #2a2a35; z-index: 5;">
                    <th style="text-align: left; padding: 5px; color: #fff;">NAME</th>
                    <th style="width: 50px; text-align: center; color: #fff;">RANK/COST</th>
                    <th style="width: 40px;"></th>
                </tr>
            </thead>
            <tbody>
                {{#each disciplines as |discipline id|}}
                
                {{!-- PARENT ROW (Discipline) --}}
                <tr class="item" data-item-id="{{discipline._id}}" style="background: rgba(138, 43, 226, 0.1); border-bottom: 1px solid #555;">
                    <td class="item-name" style="padding-left: 5px; font-weight: bold; color: #cfaaf5;">
                        {{discipline.name}}
                    </td>
                    <td>
                        <input type="number" value="{{discipline.system.rank}}" readonly style="text-align: center; background: transparent; border: none; color: #fff; font-weight: bold;"/>
                    </td>
                    <td class="item-controls" style="text-align: center;">
                        {{#if (ne discipline._id "unsorted")}}
                        <a class="item-edit"><i class="fas fa-edit"></i></a>
                        <a class="item-delete"><i class="fas fa-trash"></i></a>
                        {{/if}}
                    </td>
                </tr>

                {{!-- CHILDREN ROWS (Formulas) --}}
                {{#each discipline.formulas as |formula fid|}}
                <tr class="item" data-item-id="{{formula._id}}" style="font-size: 0.9em;">
                    <td class="item-name rollable" data-roll-type="item" style="padding-left: 20px; cursor: pointer; color: #aaa;">
                        <i class="fas fa-angle-right" style="font-size: 0.8em;"></i> {{formula.name}}
                    </td>
                    <td style="text-align: center; color: #aaa;">
                        {{formula.system.cost}}
                    </td>
                    <td class="item-controls" style="text-align: center;">
                        <a class="item-edit"><i class="fas fa-edit" style="font-size: 0.8em;"></i></a>
                        <a class="item-delete"><i class="fas fa-trash" style="font-size: 0.8em;"></i></a>
                    </td>
                </tr>
                {{/each}}
                
                {{/each}}

                {{#unless disciplines}}
                    <tr><td colspan="3" style="padding:10px; color:#555; font-style:italic; text-align: center;">No Disciplines learned...</td></tr>
                {{/unless}}
            </tbody>
        </table>
    </div>
</div>